---
layout: page
width: expand
---

<div class="container">
    <div class="row">
        <div class="col-2"></div>
        <div class="col">

            <h1>Administration</h1>  
            <p>We want to be able to deliver a simple, but powerful solution to API discovery using the APIs.json specification. This is the story and the controls to deliver this solution in an ongoing way using the APIs.io API search engine.</p>
            <h2>API Key</h2>
            <p>This narrative uses the APIs.io API to enable the functionality described on this page, so you will need an API key to utilize any of the actions provided in this narrative.</p>
            <form>
                <div class="mb-3">
                <input type="email" class="form-control" id="apiKey" aria-describedby="apiKey" value="">
                </div>
            </form>

            <h2>Engine Capabilities</h2>
            <p>To deliver the engine behind the APIs.io search engine we need a handful of capabilities allowing the submission and processing of APIs.json files.</p>
            <table width="100%">
                <tr>
                    <td align="right">&#8594;</td>
                    <td>
                        <a href="https://apis-io-site.apievangelist.com/add/" target="_blank">Submit APIs.json</a>
                    </td>
                    <td>
                        <p>APIs.json files can be submitted via the form on the APIs.io website. This will submit the URL for an APIs.json into the queue for processing, which can be pulled below.</p>
                    </td>
                    <td id="submit-apisjson-message"></td>
                </tr>                
                <script>
                    function pullAPIsJSON(){

                        document.getElementById("pull-apisjson-message").innerHTML = "Pulling..."

                        const options = {
                            method: 'PUT',
                            headers: {
                                "Accept": "application/json",
                                "X-API-KEY": document.getElementById("apiKey").value
                            }
                        };  

                        fetch('https://8wmp1s1pni.execute-api.us-east-1.amazonaws.com/staging/engine/apisjson',options)
                            .then(function(response) {
                                if (!response.ok) {
                                    console.log('Error with Status Code: ' + response.status);                                
                                }
                                response.json().then(function(data) {   

                                    //console.log(data);
                                    document.getElementById("pull-apisjson-message").innerHTML = data.message;

                                });
                                })
                                .catch(function(err) {
                                    console.log('Error: ' + err);
                            });

                        }
                </script>
                <tr>
                    <td align="right">&#8594;</td>
                    <td>
                        <a href="#" onclick="pullAPIsJSON(); return false;">Pull APIs.json</a>
                    </td>
                    <td>
                        <p>This pulls any APIs.json that haven't been pulled this week, processing the following details of the APIs.json being pulled.</p>
                        <ul>
                            <li>Pulls the APIs.json using the URL provided on submission</li>
                            <li>Validates the APIs.json as valid 0.14, 0.15, or 0.16</li>
                            <li>Produces a slug using the name domain of the URL</li>
                            <li>Inserts URL, slug, name, description, image, and tags in database</li>
                            <li>Processes any APIs that are available in the apis.json</li>
                            <li>Processes any properties for the API listed</li>
                            <li>Process any common properties for the APIs.json</li>
                            <li>Process any maintainers for the APIs.json</li>
                            <li>Insert APIs into database</li>
                            <li>Insert API properties into database</li>
                            <li>Insert common properties into database</li>
                            <li>Insert maintainers into database</li>                 
                        </ul>
                    </td>
                    <td id="pull-apisjson-message"></td>
                </tr>
                <script>
                    function pullAPIsProperties(){

                        document.getElementById("pull-apis-properties-message").innerHTML = "Pulling..."

                        const options = {
                            method: 'PUT',
                            headers: {
                                "Accept": "application/json",
                                "X-API-KEY": document.getElementById("apiKey").value
                            }
                        };  

                        fetch('https://8wmp1s1pni.execute-api.us-east-1.amazonaws.com/staging/engine/apisjson/apis/properties',options)
                            .then(function(response) {
                                if (!response.ok) {
                                    console.log('Error with Status Code: ' + response.status);                                
                                }
                                response.json().then(function(data) {   

                                    //console.log(data);
                                    document.getElementById("pull-apis-properties-message").innerHTML = data.message;

                                });
                                })
                                .catch(function(err) {
                                    console.log('Error: ' + err);
                            });

                        }
                </script>            
                <tr>
                    <td align="right">&#8594;</td>
                    <td>
                        <a href="#" onclick="pullAPIsProperties(); return false;">Pull APIs Properties</a>
                    </td>
                    <td>
                        This pulls any APIs properties that haven't been pulled this week.
                    </td>
                    <td id="pull-apis-properties-message"></td>
                </tr> 
                <tr>
                    <td align="right">&#8594;</td>
                    <td>
                        <a href="apis-json-overlay/" target="_blank">APIs.json Overlay</a>
                    </td>
                    <td>
                        <p>This is where we apply an overlay to all of the APIs.json submitted, providing an opportunity to edit the name, slug, description, and image for the overall APIs.json. Right now only the slug is critical to the publishing of consistent APis, but eventually we'll need the rest of the information standardized.</p>
                    </td>
                    <td id="apisjson-overlay-message"></td>
                </tr>   
                <tr>
                    <td align="right">&#8594;</td>
                    <td>
                        <a href="apis-json-apis-overlay/" target="_blank">APIs.json APIs Overlay</a>
                    </td>
                    <td>
                        <p>This is where we apply an overlay to all of the APIs indexed within the APIs.json files that are submitted, providing an opportunity to edit the name, slug, description, and image for each individual API. This is needed to provide a consistent set of information for publishing to the web site and making available for searching and browsing.</p>
                    </td>
                    <td id="apisjson-overlay-message"></td>
                </tr>                                             
            </table>

            <h2>Ratings Capabilities</h2>
            <p>This executes the common functions of the ratings engine.</p>
            <ul>
                <script>
                    function rateAPIsJSON(){

                        document.getElementById("ratings-apisjson-message").innerHTML = "Pulling..."

                        const options = {
                            method: 'PUT',
                            headers: {
                                "Accept": "application/json",
                                "X-API-KEY": document.getElementById("apiKey").value
                            }
                        };  

                        fetch('https://yzd9042kgi.execute-api.us-east-1.amazonaws.com/staging/ratings/apisjson',options)
                            .then(function(response) {
                                if (!response.ok) {
                                    console.log('Error with Status Code: ' + response.status);                                
                                }
                                response.json().then(function(data) {   

                                    //console.log(data);
                                    document.getElementById("ratings-apisjson-message").innerHTML = data.message;

                                });
                                })
                                .catch(function(err) {
                                    console.log('Error: ' + err);
                            });

                        }
                </script>
                <li><a href="#" onclick="rateAPIsJSON(); return false;">Rate APIs.json</a> - <span id="ratings-apisjson-message">This rates any APIs.json that haven't been rated this week.</span></li>
                <script>
                    function rateAPIsProperties(){

                        document.getElementById("ratings-apis-properties-message").innerHTML = "Pulling..."

                        const options = {
                            method: 'PUT',
                            headers: {
                                "Accept": "application/json",
                                "X-API-KEY": document.getElementById("apiKey").value
                            }
                        };  

                        fetch('https://yzd9042kgi.execute-api.us-east-1.amazonaws.com/staging/ratings/apisjson/apis/properties',options)
                            .then(function(response) {
                                if (!response.ok) {
                                    console.log('Error with Status Code: ' + response.status);                                
                                }
                                response.json().then(function(data) {   

                                    //console.log(data);
                                    document.getElementById("ratings-apis-properties-message").innerHTML = data.message;

                                });
                                })
                                .catch(function(err) {
                                    console.log('Error: ' + err);
                            });

                        }
                </script>            
                <li><a href="#" onclick="rateAPIsProperties(); return false;">Rate APIs Properties</a> - <span id="ratings-apis-properties-message">This rates any API properties that haven't been rated this week.</span></li>
            </ul>      
            
            <h2>Publishing Capabilities</h2>
            <p>This executes the common functions of the publishing engine.</p>
            <ul>
                <script>
                    function publishAPIs(){

                        document.getElementById("publishing-apis-message").innerHTML = "Publishing..."

                        const options = {
                            method: 'PUT',
                            headers: {
                                "Accept": "application/json",
                                "X-API-KEY": document.getElementById("apiKey").value
                            }
                        };  

                        fetch('https://zygznnor01.execute-api.us-east-1.amazonaws.com/staging/publish/apis',options)
                            .then(function(response) {
                                if (!response.ok) {
                                    console.log('Error with Status Code: ' + response.status);                                
                                }
                                response.json().then(function(data) {   

                                    //console.log(data);
                                    document.getElementById("publishing-apisjson-message").innerHTML = data.message;

                                });
                                })
                                .catch(function(err) {
                                    console.log('Error: ' + err);
                            });

                        }
                </script>
                <li><a href="#" onclick="publishAPIs(); return false;">Publish APIs</a> - <span id="publishing-apis-message">This publishes any APIs that haven't been published this week.</span></li>
            </ul>              

        </div>
        <div class="col-2"></div>
    </div>
</div>